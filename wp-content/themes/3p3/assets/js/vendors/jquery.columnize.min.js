/**
 * jQuery Columnize Plugin
 * version: 1.0 (2013-02-15)
 *
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * Toni Almeida wrote this plugin, which proclaims:
 * "NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK."
 *
 * Copyrighted 2013 by Toni Almeida, promatik.
 */
(function(e){function r(t,n){var r=t.html().split(" "),i="",s="",o="",u="";e("#flowColumnTmpPar, #flowColumnTmpParP").html("");if(t.attr("class")!=undefined)o=" class='"+t.attr("class")+"'";e("#flowColumnTmpPar").append(e("<p "+o+" id='flowColumnTmpParP'></p>"));while(r.length>0){e("#flowColumnTmpParP").append(r[0]+" ");if(e("#flowColumnTmpParP").height()+1>=n){i=e("#flowColumnTmpParP").html();e("#flowColumnTmpParP").html("");while(r.length>0){e("#flowColumnTmpParP").append(r[0]+" ");r.shift()}s=e("#flowColumnTmpParP").html()}else{u+=r[0]+" ";r.shift()}}return new Array("<p"+o+">"+u+"</p>","<p"+o+">"+s+"</p>")}var t={debug:false,width:210,height:300};var n={getColumns:function(e){if(e===undefined)e={};if(e.width!=undefined)t.width=e.width;if(e.height!=undefined)t.height=e.height;t.debug=true;return n.columnize.apply(this)},columnize:function(i){var s=e(this),o=0,u;if(i===undefined)i={};if(i.width!=undefined)t.width=i.width;if(i.height!=undefined)t.height=i.height;var a=0;s.each(function(){a=0;var i=e(this);if(!t.debug){o=n.getColumns.apply(i);t.debug=false}var s="height:"+t.height+"px; width:"+t.width+"px;",f=i.find("p"),l=e("<div></div>").hide().append(f),c=e("<div></div>").attr("id","flowColumnTmp"),h=e("<div></div>").attr("id","flowColumnTmpPar");e(l).add(c).add(h).addClass("flowColumn").attr("style",s);e("body").append(l,c,h);i.html("");for(var p=0;p<o;p++)i.append(e("<div></div>").addClass("flowColumn c"+p).attr("style",s));u=0;e("#flowColumnTmp").show();e(l).add(h).show();l.find("p").each(function(){var n=e(this).height()+parseInt(e(this).css("paddingTop"))+parseInt(e(this).css("paddingBottom"));u+=n;if(u>t.height){var s=r(e(this),t.height-(u-n));var o=e("#flowColumnTmp").html(s[1]).find("p:first");u=o.height()+parseInt(o.css("paddingTop"))+parseInt(o.css("paddingBottom"));if(!t.debug)for(var f=0;f<=1;f++)i.find(".c"+(a+f)).append(s[f]);a++}else{i.find(".c"+a).append(e(this))}});e("#flowColumnTmp, #flowColumnTmpPar").add(l).remove();if(t.debug)i.html(f)});if(t.debug)t.debug=false;return a+1}};e.fn.columnize=function(t){if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return n.columnize.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.columnize")}}})(jQuery)